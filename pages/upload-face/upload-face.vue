<template>
	<view class="page">
		<!-- æ‘„åƒå¤´é¢„è§ˆ -->
		<camera
			class="camera"
			device-position="front"
			flash="off"
		></camera>

		<!-- å¼•å¯¼é®ç½© -->
		<view class="mask">
			<view class="face-frame"></view>
			<text class="tip">è¯·å°†äººè„¸å¯¹å‡†å–æ™¯æ¡†</text>
		</view>

		<!-- æ“ä½œæŒ‰é’® -->
		<view class="bottom">
			<view class="btn" @click="handleCapture">
				é‡‡é›†äººè„¸ä¿¡æ¯
			</view>
		</view>
	</view>
</template>


<script setup>
const handleCapture = () => {
	const ctx = uni.createCameraContext()
	ctx.takePhoto({
		quality: 'high',
		success(res) {
			console.log('é‡‡é›†åˆ°çš„å›¾ç‰‡è·¯å¾„ï¼š', res.tempImagePath)
			// ğŸ‘‰ åç»­ï¼šä¸Šä¼ åˆ°åç«¯ / æå–äººè„¸ç‰¹å¾
			uni.showToast({
				title: 'é‡‡é›†æˆåŠŸ',
				icon: 'success'
			})
		},
		fail() {
			uni.showToast({
				title: 'é‡‡é›†å¤±è´¥ï¼Œè¯·é‡è¯•',
				icon: 'none'
			})
		}
	})
}
</script>

<style lang="scss">
.page {
	position: relative;
	width: 100vw;
	height: 100vh;
	background: #000;
	overflow: hidden;
}

.camera {
	width: 100%;
	height: 100%;
}

/* é®ç½©å±‚ */
.mask {
	position: absolute;
	inset: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	pointer-events: none;
}

/* äººè„¸å¼•å¯¼æ¡† */
.face-frame {
	width: 420rpx;
	height: 520rpx;
	border: 4rpx solid #4a8cff;
	border-radius: 50%;
	box-shadow: 0 0 0 2000rpx rgba(0, 0, 0, 0.45);
}

/* æç¤ºæ–‡å­— */
.tip {
	margin-top: 36rpx;
	color: #fff;
	font-size: 28rpx;
	letter-spacing: 2rpx;
}

/* åº•éƒ¨åŒºåŸŸ */
.bottom {
	position: absolute;
	left: 0;
	right: 0;
	bottom: 80rpx;
	display: flex;
	justify-content: center;
}

/* æŒ‰é’® */
.btn {
	background: #4a8cff;
	color: #fff;
	padding: 26rpx 90rpx;
	border-radius: 999rpx;
	font-size: 30rpx;
	box-shadow: 0 12rpx 30rpx rgba(74, 140, 255, 0.45);
}

</style>