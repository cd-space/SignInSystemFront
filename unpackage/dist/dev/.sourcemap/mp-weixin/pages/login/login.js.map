{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n  <view class=\"login-page\">\n    <view class=\"title\">Ê¨¢ËøéÁôªÂΩï</view>\n\n    <!-- Ë¥¶Âè∑ËæìÂÖ• -->\n    <view class=\"form-item\">\n      <input\n        v-model=\"account\"\n        placeholder=\"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑ÊàñÂ≠¶Âè∑\"\n        placeholder-class=\"placeholder\"\n      />\n    </view>\n\n    <!-- ÂØÜÁ†Å -->\n    <view class=\"form-item\">\r\n      <input\r\n        v-model=\"password\"\r\n        :type=\"showPassword ? 'text' : 'password'\"\r\n        placeholder=\"ËØ∑ËæìÂÖ•ÂØÜÁ†Å\"\r\n        placeholder-class=\"placeholder\"\r\n      />\r\n    \r\n      <view class=\"eye\" @click=\"togglePassword\">\r\n        {{ showPassword ? 'üëÅ' : 'Ô∏èüôà' }}\r\n      </view>\r\n    </view>\n\n    <!-- ÁôªÂΩïÊåâÈíÆ -->\n    <button class=\"btn\" @click=\"handleLogin\">\n      ÁôªÂΩï\n    </button>\n\n    <!-- ÂéªÊ≥®ÂÜå -->\n    <view class=\"footer\">\n      ËøòÊ≤°ÊúâË¥¶Âè∑Ôºü\n      <text class=\"link\" @click=\"goRegister\">ÂéªÊ≥®ÂÜå</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\r\nimport { loginApi } from '@/api/auth'\n\nconst account = ref('')\nconst password = ref('')\r\n\r\nconst showPassword = ref(false)\r\n\r\nconst togglePassword = () => {\n  showPassword.value = !showPassword.value\n}\n\r\n\r\nconst isPhone = (val) => {\n  return /^1[3-9]\\d{9}$/.test(val)\n}\n\nconst handleLogin = async () => {\n  if (!account.value || !password.value) {\n    uni.showToast({\n      title: 'ËØ∑ËæìÂÖ•ÂÆåÊï¥‰ø°ÊÅØ',\n      icon: 'none'\n    })\n    return\n  }\n\n  const isPhone = /^1[3-9]\\d{9}$/.test(account.value)\n\n  const params = isPhone\n    ? {\n        phone: account.value,\n        password: password.value\n      }\n    : {\n        student_id: account.value,\n        password: password.value\n      }\n\n  try {\n    const data = await loginApi(params)\n\n    uni.setStorageSync('userinfo', data)\n\n    uni.showToast({\n      title: 'ÁôªÂΩïÊàêÂäü',\n      icon: 'success'\n    })\n\n    uni.switchTab({\n      url: '/pages/mine/mine'\n    })\n  } catch (e) {\n    console.log('ÁôªÂΩïÂ§±Ë¥•', e)\n  }\n}\n\nconst goRegister = () => {\n  uni.navigateTo({\n    url: '/pages/register/register'\n  })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.login-page {\n  min-height: 100vh;\n  background: #fff;\n  padding: 80rpx 40rpx;\n}\n\n.title {\n  font-size: 44rpx;\n  font-weight: 600;\n  margin-bottom: 60rpx;\n}\n\n.form-item {\n  position: relative;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #eee;\n\n  input {\n    flex: 1;\n    height: 90rpx;\n    font-size: 30rpx;\n  }\n\n  .eye {\n    position: absolute;\n    right: 20rpx;\n    font-size: 32rpx;\n    color: #999;\n  }\n}\n\n.btn {\n  margin-top: 40rpx;\n  background: #2979ff;\n  color: #fff;\n  border-radius: 50rpx;\n}\n\n.footer {\n  margin-top: 40rpx;\n  text-align: center;\n  color: #999;\n}\n\n.link {\n  color: #2979ff;\n}\n</style>\n","import MiniProgramPage from 'D:/Projects/HBuilderX/SignInSystemMiniProgram/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","loginApi"],"mappings":";;;;;;AA4CA,UAAM,UAAUA,cAAG,IAAC,EAAE;AACtB,UAAM,WAAWA,cAAG,IAAC,EAAE;AAEvB,UAAM,eAAeA,cAAG,IAAC,KAAK;AAE9B,UAAM,iBAAiB,MAAM;AAC3B,mBAAa,QAAQ,CAAC,aAAa;AAAA,IACrC;AAOA,UAAM,cAAc,YAAY;AAC9B,UAAI,CAAC,QAAQ,SAAS,CAAC,SAAS,OAAO;AACrCC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,YAAM,UAAU,gBAAgB,KAAK,QAAQ,KAAK;AAElD,YAAM,SAAS,UACX;AAAA,QACE,OAAO,QAAQ;AAAA,QACf,UAAU,SAAS;AAAA,MACpB,IACD;AAAA,QACE,YAAY,QAAQ;AAAA,QACpB,UAAU,SAAS;AAAA,MACpB;AAEL,UAAI;AACF,cAAM,OAAO,MAAMC,SAAQ,SAAC,MAAM;AAElCD,4BAAI,eAAe,YAAY,IAAI;AAEnCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAEDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,KAAK;AAAA,QACX,CAAK;AAAA,MACF,SAAQ,GAAG;AACVA,sBAAAA,MAAA,MAAA,OAAA,+BAAY,QAAQ,CAAC;AAAA,MACtB;AAAA,IACH;AAEA,UAAM,aAAa,MAAM;AACvBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;ACpGA,GAAG,WAAW,eAAe;"}