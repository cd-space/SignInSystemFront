{"version":3,"file":"register.js","sources":["pages/register/register.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\n  <view class=\"register-page\">\n    <view class=\"title\">Ê≥®ÂÜåË¥¶Âè∑</view>\n\n    <!-- ÂßìÂêçÔºàÂøÖÂ°´Ôºâ -->\n    <view class=\"form-item\">\n      <input\n        v-model=\"name\"\n        placeholder=\"ËØ∑ËæìÂÖ•ÂßìÂêçÔºàÂøÖÂ°´Ôºâ\"\n        placeholder-class=\"placeholder\"\n      />\n    </view>\n\n    <!-- ÊâãÊú∫Âè∑ÔºàÂøÖÂ°´Ôºâ -->\n    <view class=\"form-item\">\n      <input\n        v-model=\"phone\"\n        placeholder=\"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑ÔºàÂøÖÂ°´Ôºâ\"\n        placeholder-class=\"placeholder\"\n      />\n    </view>\n\n    <!-- Â≠¶Âè∑ÔºàÈùûÂøÖÂ°´Ôºâ -->\n    <view class=\"form-item\">\n      <input\n        v-model=\"studentId\"\n        placeholder=\"ËØ∑ËæìÂÖ•Â≠¶Âè∑ÔºàÂèØÈÄâÔºâ\"\n        placeholder-class=\"placeholder\"\n      />\n    </view>\n\n    <!-- ÂØÜÁ†Å -->\n    <view class=\"form-item\">\n      <input\n        v-model=\"password\"\n        :type=\"showPassword ? 'text' : 'password'\"\n        placeholder=\"ËØ∑ËæìÂÖ•ÂØÜÁ†Å\"\n        placeholder-class=\"placeholder\"\n      />\n\n      <view class=\"eye\" @click=\"togglePassword\">\n        {{ showPassword ? 'üëÅÔ∏è' : 'üôà' }}\n      </view>\n    </view>\n\n    <button class=\"btn\" @click=\"handleRegister\">\n      Ê≥®ÂÜå\n    </button>\n  </view>\n</template>\n\n\n<script setup>\nimport { ref } from 'vue'\nimport { registerApi } from '@/api/auth'\n\nconst name = ref('')\nconst phone = ref('')\nconst studentId = ref('')\nconst password = ref('')\nconst showPassword = ref(false)\n\n// ÂàáÊç¢ÂØÜÁ†ÅÂèØËßÅ\nconst togglePassword = () => {\n  showPassword.value = !showPassword.value\n}\n\n// ÊâãÊú∫Âè∑Ê≠£ÂàôÊ†°È™å\nconst isValidPhone = (val) => {\n  return /^1[3-9]\\d{9}$/.test(val)\n}\n\nconst handleRegister = async () => {\n  // ÂøÖÂ°´Ê†°È™å\n  if (!name.value || !phone.value || !password.value) {\n    uni.showToast({\n      title: 'ÂßìÂêç„ÄÅÊâãÊú∫Âè∑ÂíåÂØÜÁ†ÅÂøÖÂ°´',\n      icon: 'none'\n    })\n    return\n  }\n\n  // ÊâãÊú∫Âè∑Ê†ºÂºèÊ†°È™å\n  if (!isValidPhone(phone.value)) {\n    uni.showToast({\n      title: 'ËØ∑ËæìÂÖ•ÊúâÊïàÊâãÊú∫Âè∑',\n      icon: 'none'\n    })\n    return\n  }\n\n  const params = {\n    name: name.value,\n    phone: phone.value,\n    student_id: studentId.value || null,\n    password: password.value,\r\n\trole:'student'\n  }\n\n  try {\n    const res = await registerApi(params)\n\n    uni.showToast({\n      title: 'Ê≥®ÂÜåÊàêÂäü',\n      icon: 'success'\n    })\n\n    uni.navigateBack()\n  } catch (error) {\n    console.log('Ê≥®ÂÜåÂ§±Ë¥•', error)\n    uni.showToast({\n      title: error?.msg || 'Ê≥®ÂÜåÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n      icon: 'none'\n    })\n  }\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n.register-page {\n  min-height: 100vh;\n  background: #fff;\n  padding: 80rpx 40rpx;\n}\n\n.title {\n  font-size: 44rpx;\n  font-weight: 600;\n  margin-bottom: 60rpx;\n}\n\n.btn {\n  margin-top: 40rpx;\n  background: #2979ff;\n  color: #fff;\n  border-radius: 50rpx;\n}\r\n\r\n.form-item {\n  position: relative;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #eee;\n\n  input {\n    flex: 1;\n    height: 90rpx;\n    font-size: 30rpx;\n  }\n\n  .eye {\n    position: absolute;\n    right: 20rpx;\n    font-size: 32rpx;\n    color: #999;\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/Projects/HBuilderX/SignInSystemMiniProgram/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","registerApi"],"mappings":";;;;;;AAwDA,UAAM,OAAOA,cAAG,IAAC,EAAE;AACnB,UAAM,QAAQA,cAAG,IAAC,EAAE;AACpB,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,WAAWA,cAAG,IAAC,EAAE;AACvB,UAAM,eAAeA,cAAG,IAAC,KAAK;AAG9B,UAAM,iBAAiB,MAAM;AAC3B,mBAAa,QAAQ,CAAC,aAAa;AAAA,IACrC;AAGA,UAAM,eAAe,CAAC,QAAQ;AAC5B,aAAO,gBAAgB,KAAK,GAAG;AAAA,IACjC;AAEA,UAAM,iBAAiB,YAAY;AAEjC,UAAI,CAAC,KAAK,SAAS,CAAC,MAAM,SAAS,CAAC,SAAS,OAAO;AAClDC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAGD,UAAI,CAAC,aAAa,MAAM,KAAK,GAAG;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,YAAM,SAAS;AAAA,QACb,MAAM,KAAK;AAAA,QACX,OAAO,MAAM;AAAA,QACb,YAAY,UAAU,SAAS;AAAA,QAC/B,UAAU,SAAS;AAAA,QACtB,MAAK;AAAA,MACH;AAED,UAAI;AACF,cAAM,MAAM,MAAMC,SAAW,YAAC,MAAM;AAEpCD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAEDA,sBAAAA,MAAI,aAAc;AAAA,MACnB,SAAQ,OAAO;AACdA,sBAAAA,MAAY,MAAA,OAAA,sCAAA,QAAQ,KAAK;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,QAAO,+BAAO,QAAO;AAAA,UACrB,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;;;;;;;;;;;;;;;;;;;;AClHA,GAAG,WAAW,eAAe;"}