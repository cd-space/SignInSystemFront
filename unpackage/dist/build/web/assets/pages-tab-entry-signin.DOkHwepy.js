import{o as e,c as a,w as s,a as l,i as t,r as u,b as n,t as c,d as i,F as d,e as o,n as r,f,g as v,h as _,s as m,j as p,k,l as g,m as x,p as y}from"./index-noCr3kf8.js";import{o as h}from"./uni-app.es.BdGBXyGY.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=I({},[["render",function(u,n){const c=t;return e(),a(c,{class:""},{default:s((()=>[l(" 学生签到页面 ")])),_:1})}]]),b=I({__name:"teacher-signin",setup(y){const h=u(!1),I=u([{id:1,name:"一班"},{id:2,name:"二班"},{id:3,name:"三班"}]),C=u([]),b=u([]),j=u([{id:1,name:"张三",statusIndex:0},{id:2,name:"李四",statusIndex:0},{id:3,name:"王五",statusIndex:0}]),w=["未签到","已签到","请假","迟到"],F=["#ff3b30","#4cd964","#007aff","#ff3b30"],T=async()=>{const e=await _({count:9-b.value.length,sizeType:["original","compressed"],sourceType:["album","camera"]});b.value.push(...e.tempFilePaths)},z=()=>{h.value||0!==C.value.length?(h.value=!h.value,h.value?m({title:"签到已发布",icon:"success"}):(m({title:"签到结束",icon:"success"}),b.value=[])):m({title:"请先选择班级",icon:"none"})},O=()=>{j.value.sort(((e,a)=>{const s=e=>1===e?1:0;return s(e.statusIndex)-s(a.statusIndex)}))};return(u,_)=>{const m=p,y=t,P=k,q=g,A=x;return e(),a(y,{class:"teacher-signin-page"},{default:s((()=>[n(m,{class:"btn",onClick:z},{default:s((()=>[l(c(h.value?"结束签到":"发布签到"),1)])),_:1}),h.value?f("",!0):(e(),a(y,{key:0,class:"class-selection"},{default:s((()=>[n(y,{class:"title"},{default:s((()=>[l("选择班级")])),_:1}),n(y,{class:"class-list"},{default:s((()=>[(e(!0),i(d,null,o(I.value,(t=>(e(),a(y,{class:r(["class-item",{selected:C.value.includes(t.id)}]),key:t.id,onClick:e=>(e=>{const a=C.value.indexOf(e);-1===a?C.value.push(e):C.value.splice(a,1)})(t.id)},{default:s((()=>[l(c(t.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})),h.value?(e(),a(y,{key:1,class:"upload-section"},{default:s((()=>[n(y,{class:"title"},{default:s((()=>[l("上传签到图片")])),_:1}),n(y,{class:"upload-list"},{default:s((()=>[(e(!0),i(d,null,o(b.value,((t,u)=>(e(),a(y,{class:"upload-item",key:u},{default:s((()=>[n(P,{src:t,class:"img"},null,8,["src"]),n(y,{class:"remove",onClick:e=>(e=>{b.value.splice(e,1)})(u)},{default:s((()=>[l("✕")])),_:2},1032,["onClick"])])),_:2},1024)))),128)),n(m,{class:"upload-btn",onClick:T},{default:s((()=>[l("+ 上传图片")])),_:1})])),_:1})])),_:1})):f("",!0),h.value?(e(),a(y,{key:2,class:"results-section"},{default:s((()=>[n(y,{class:"title"},{default:s((()=>[l("学生签到结果")])),_:1}),n(y,{class:"result-list"},{default:s((()=>[(e(!0),i(d,null,o(j.value,((t,u)=>(e(),a(y,{class:"result-item",key:t.id},{default:s((()=>[n(q,null,{default:s((()=>[l(c(t.name),1)])),_:2},1024),n(A,{value:t.statusIndex,range:w,onChange:e=>((e,a)=>{j.value[e].statusIndex=a.detail.value,O()})(u,e)},{default:s((()=>[n(q,{style:v({color:F[t.statusIndex]})},{default:s((()=>[l(c(w[t.statusIndex]),1)])),_:2},1032,["style"])])),_:2},1032,["value","onChange"])])),_:2},1024)))),128))])),_:1})])),_:1})):f("",!0)])),_:1})}}},[["__scopeId","data-v-06c10baa"]]),j={__name:"signin",setup(l){const n=u("");return h((()=>{const e=y("userinfo");n.value=(null==e?void 0:e.role)||""})),(l,u)=>{const c=t;return e(),a(c,null,{default:s((()=>["student"===n.value||""===n.value?(e(),a(C,{key:0})):"teacher"===n.value||"admin"===n.value?(e(),a(b,{key:1})):f("",!0)])),_:1})}}};export{j as default};
